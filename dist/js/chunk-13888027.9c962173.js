(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13888027"],{"933a":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("data-header",{attrs:{title:"数据存管域节点准入许可管理",btn:!0}}),n("div",{staticClass:"padding bg-white"},[n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",{staticStyle:{color:"#273D52","font-weight":"600"}},[t._v("准入节点服务器列表")]),n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:t.confirmAdd}},[t._v("添加")]),n("Tooltip",{attrs:{placement:"top","max-width":"600",transfer:"",content:"功效说明：在“节点网络准入审批”选择“开启”时，准入节点服务器列表中的节点服务器才可以加入链的节点网络。"}},[n("Icon",{attrs:{type:"ios-help-circle-outline"}})],1)],1),n("Row",[n("Col",{attrs:{span:"5"}},[n("div",{staticClass:"condition-item"},[n("span",{staticClass:"condition-label"},[t._v("隶属企业名称：")]),n("Input",{attrs:{type:"text",placeholder:"隶属企业名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]),n("Col",{attrs:{span:"7"}},[n("div",{staticClass:"condition-item"},[n("span",{staticClass:"condition-label"},[t._v("服务器身份标识：")]),n("Input",{attrs:{type:"text",placeholder:"节点服务器身份标识"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)]),n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"condition-item"},[n("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1),n("div",[n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])],1)],1)},i=[],r=(n("fb6a"),n("96cf"),n("1da1")),a=n("9aa7"),o=n("f96b"),c={data:function(){var t=this,e=[{title:"隶属企业名称",key:"main_company_company_name"},{title:"服务器身份标识",key:"chainnode_id"},{title:"节点类型",key:"node_type"},{title:"添加时间",key:"join_time",render:function(e,n){var s=n.row;return s.join_time?e("span",t.$moment.unix(s.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"操作",render:function(e,n){var s=n.row||{},i="删除";return e("a",{on:{click:function(){t.remove(s)}}},i)}}];return{myswitch:"1",listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10},form:{name:"",address:"",status:""}}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;this.listLoading=!0;var e=sessionStorage.getItem("fbs_storage_id");a["a"]({storage_id:e,address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,e.rows&&(t.oldList=e.rows,t.page.total=t.oldList.length,t.getList())})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},search:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},remove:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),nodeAddress:t.chainnode_id,nodeInfo:{nodeName:"",orgName:"",orgAddress:"",dSName:""},url:"",amount:"1",op:2},n.next=3,o["a"]({method:"DSDomainDSNodeApplyContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:i=n.sent,i&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:i,setIntervalFunc:function(){return o["b"]({txId:i.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 3===t.status&&(e.$Message.success("删除成功"),e.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},pageChange:function(t){this.page.current=t,this.getList()},confirmAdd:function(){this.$router.push("/data-nodeAddAdmin")}}},d=c,u=n("2877"),l=Object(u["a"])(d,s,i,!1,null,"287016d2",null);e["default"]=l.exports},"9aa7":function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"b",(function(){return u}));var s=n("db04"),i=function(t,e){return s["a"].post("cmw/pbqss.do",t,e)},r=function(t,e){return s["a"].post("cmw/pbqsb.do",t,e)},a=function(t,e){return s["a"].post("cmw/pbqml.do",t,e)},o=function(t,e){return s["a"].post("cmw/pbqrm.do",t,e)},c=function(t,e){return s["a"].post("cmw/pbqan.do",t,e)},d=function(t,e){return s["a"].post("cmw/pbqrc.do",t,e)},u=function(t,e){return s["a"].post("cmw/pbqci.do",t,e)}},fb6a:function(t,e,n){"use strict";var s=n("23e7"),i=n("861d"),r=n("e8b5"),a=n("23cb"),o=n("50c4"),c=n("fc6a"),d=n("8418"),u=n("b622"),l=n("1dde"),p=n("ae40"),f=l("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),g=u("species"),h=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var n,s,u,l=c(this),p=o(l.length),f=a(t,p),m=a(void 0===e?p:e,p);if(r(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?i(n)&&(n=n[g],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(l,f,m);for(s=new(void 0===n?Array:n)(v(m-f,0)),u=0;f<m;f++,u++)f in l&&d(s,u,l[f]);return s.length=u,s}})}}]);
//# sourceMappingURL=chunk-13888027.9c962173.js.map