(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-09da4fae"],{"0466":function(t,e,n){t.exports=n.p+"img/logo_text_white.ac652d6e.png"},2112:function(t,e,n){},2369:function(t,e,n){"use strict";var s=n("2112"),a=n.n(s);a.a},"2e55":function(t,e,n){"use strict";var s=n("e49e"),a=n.n(s);a.a},3092:function(t,e,n){"use strict";var s=n("eff2"),a=n.n(s);a.a},"3cc4":function(t,e,n){"use strict";var s=n("ab06"),a=n.n(s);a.a},"498a":function(t,e,n){"use strict";var s=n("23e7"),a=n("58a8").trim,i=n("c8d2");s({target:"String",proto:!0,forced:i("trim")},{trim:function(){return a(this)}})},"4a7f":function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var s=n("1d80"),a=n("5899"),i="["+a+"]",r=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(t){return function(e){var n=String(s(e));return 1&t&&(n=n.replace(r,"")),2&t&&(n=n.replace(o,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},"6af6":function(t,e,n){},"70bf":function(t,e,n){"use strict";var s=n("6af6"),a=n.n(s);a.a},"72ee":function(t,e,n){"use strict";var s=n("4a7f"),a=n.n(s);a.a},"745a":function(t,e,n){t.exports=n.p+"img/success.fc8a197d.png"},7493:function(t,e,n){},"7bfa":function(t,e,n){"use strict";var s=n("cae7"),a=n.n(s);a.a},"8a73":function(t,e,n){},a434:function(t,e,n){"use strict";var s=n("23e7"),a=n("23cb"),i=n("a691"),r=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),d=n("1dde"),u=n("ae40"),f=d("splice"),v=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!v},{splice:function(t,e){var n,s,d,u,f,v,C=o(this),_=r(C.length),b=a(t,_),x=arguments.length;if(0===x?n=s=0:1===x?(n=0,s=_-b):(n=x-2,s=m(h(i(e),0),_-b)),_+n-s>p)throw TypeError(g);for(d=c(C,s),u=0;u<s;u++)f=b+u,f in C&&l(d,u,C[f]);if(d.length=s,n<s){for(u=b;u<_-s;u++)f=u+s,v=u+n,f in C?C[v]=C[f]:delete C[v];for(u=_;u>_-s+n;u--)delete C[u-1]}else if(n>s)for(u=_-s;u>b;u--)f=u+s-1,v=u+n-1,f in C?C[v]=C[f]:delete C[v];for(u=0;u<n;u++)C[u+b]=arguments[u+2];return C.length=_-s+n,d}})},ab06:function(t,e,n){},c8d2:function(t,e,n){var s=n("d039"),a=n("5899"),i="​᠎";t.exports=function(t){return s((function(){return!!a[t]()||i[t]()!=i||a[t].name!==t}))}},cae7:function(t,e,n){},d382:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"setup"},[s("div",{staticClass:"set-inner  abs"},[s("div",{staticClass:"set-left"},[s("img",{attrs:{src:n("0466"),alt:""},on:{click:t.guide}}),s("div",{staticClass:"step-wrapper"},[s("div",{staticClass:"step-title"},[t._v("节点服务器初始化状态")]),s("ul",t._l(t.steps,(function(e,n){return s("li",{key:n,class:{active:t.curStep==e.name||"step4"==e.name&&"step4-joinchain"==t.curStep}},[s("div",{staticClass:"main-step"},[t._v(t._s(e.text))]),s("div",{staticClass:"sub-step"},[t.curStep.indexOf("step4.")>-1||t.curStep.indexOf("step6.")>-1?s("ul",t._l(e.new,(function(e,n){return s("li",{key:n,class:{active:t.curStep==e.name}},[s("div",[t._v(t._s(e.text))])])})),0):t._e()])])})),0)])]),s("div",{staticClass:"abs set-right"},[s("setup-nav",{attrs:{text:t.setHeader[t.curStep]&&t.setHeader[t.curStep]["text"]},on:{"on-click":function(e){return t.navClick(t.setHeader[t.curStep]["step"])}}}),"step1"==t.curStep?s("set-server",{on:{next:t.next}}):t._e(),"step2"==t.curStep?s("bind-manager",{on:{next:t.next}}):t._e(),"step3"==t.curStep?s("bind-enterprise",{on:{next:t.next}}):t._e(),"step4.1"==t.curStep?s("new-chain",{on:{next:t.next}}):t._e(),"step4.2"==t.curStep?s("new-chain-league",{on:{next:t.next}}):t._e(),"step4.3"==t.curStep?s("new-chain-administrator",{on:{next:t.next}}):t._e(),"step4-joinchain"==t.curStep?s("join-chain",{on:{next:t.next}}):t._e()],1)])])},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"set-server"},[n("div",{staticClass:"set-body"},[n("h3",[t._v("节点服务器名称设置")]),n("div",{staticClass:"set-form"},[n("div",{staticClass:"set-form-item"},[n("Input",{attrs:{long:"",size:"large",maxlength:"20",placeholder:"请输入节点服务器名称"},model:{value:t.serverName,callback:function(e){t.serverName=e},expression:"serverName"}})],1),n("div",{staticClass:"set-from-item"},[n("Button",{attrs:{size:"large",type:"primary",loading:t.loading,long:""},on:{click:t.next}},[t._v("下一步")])],1)])])])},r=[],o=(n("b0c0"),n("498a"),n("db04")),c=function(t,e){return o["a"].post("man/pbsnn.do",t,e)},l=function(t,e){return o["a"].post("man/pbgnn.do",t,e)},d=function(t,e){return o["a"].post("man/pbgna.do",t,e)},u=function(t,e){return o["a"].post("man/pbgni.do",t,e)},f=function(t,e){return o["a"].post("man/pbgno.do",t,e)},v=function(t,e){return o["a"].post("man/pbsci.do",t,e)},h=function(t,e){return o["a"].post("man/pbsai.do",t,e)},m=function(t,e){return o["a"].post("man/pbsnc.do",t,e)},p={data:function(){return{serverName:"",loading:!1}},methods:{next:function(){this.set()},init:function(){},set:function(){var t=this,e=this.serverName.trim();e?(this.loading=!0,c({name:e}).then((function(n){1===n.retCode&&(t.$Message.success("设置成功"),t.$cookie.set("serverName",e),t.$emit("next","step2"))})).catch((function(){})).then((function(){t.loading=!1}))):this.$Message.error("请输入服务器名称")}},created:function(){var t=this;l({}).then((function(e){e&&1===e.retCode?t.serverName=e.name:(console.log(e.retMsg),t.$Message.error("查询失败"))})).catch((function(t){console.log(t)})).then((function(){t.loading=!1}))}},g=p,C=(n("3092"),n("2877")),_=Object(C["a"])(g,i,r,!1,null,"5aa50e3c",null),b=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setup-nav"},[n("div",{staticClass:"setup-nav-inner",on:{click:t.nav}},[n("Icon",{attrs:{type:"md-arrow-back"}}),n("span",[t._v(t._s(t.text))])],1)])},A=[],k={props:{text:{type:String,default:""}},methods:{nav:function(){var t=this.$props.step;this.$emit("on-click",t)}}},y=k,P=(n("dd02"),Object(C["a"])(y,x,A,!1,null,null,null)),I=P.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bind-manager"},[s("input",{attrs:{type:"hidden",id:"signResult"}}),s("div",{staticClass:"bind-inner"},[t.success?t._e():s("div",{staticClass:"bind-body"},[s("h3",[t._v("绑定首位服务器管理员")]),s("Row",[s("Col",[s("div",{staticClass:"condition-item"},[s("span",{staticClass:"condition-label"},[t._v("初始管理员名称：")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.paramStr,expression:"paramStr"}],staticClass:"condition-int",attrs:{type:"text",placeholder:"请输入初始管理员名称"},domProps:{value:t.paramStr},on:{input:function(e){e.target.composing||(t.paramStr=e.target.value)}}})])])],1),s("p",[t._v("请通过身份签名安全插件，用需要绑定的管理员身份完成签名确认。")]),s("Button",{attrs:{type:"primary",loading:t.loading,long:""},on:{click:t.bind}},[t._v("绑定")])],1),t.success?s("div",{staticClass:"bind-body bind-success"},[s("img",{attrs:{src:n("745a"),alt:""}}),s("h3",[t._v("节点服务器首位管理员绑定成功！")]),s("Button",{attrs:{type:"primary",long:""},on:{click:t.next}},[t._v("企业隶属关系绑定")])],1):t._e()])])},M=[],j={data:function(){return{success:!1,loading:!1,timer:null,serverTag:"",paramStr:""}},destroyed:function(){},created:function(){},methods:{bind:function(){var t=this;if(sessionStorage.clear(),this.paramStr){var e=(new Date).getTime(),n={ts:e,sign:e+";"+this.paramStr.trim()};this.$qrCodeAuthDialog.show({url:"man/pbsna.do",data:n,setIntervalFunc:function(){return d({})},func:"setup_node_admin"},(function(e){return e.then((function(e){return!(!e||1!==e.retCode)&&(sessionStorage.setItem("setup_admin_address",e.address),sessionStorage.setItem("setup_admin_name",e.name),t.success=!0,!0)})).catch((function(){return!1}))}))}else this.$Message.error("请输入管理员名称")},next:function(){this.$emit("next","step3")}}},w=j,N=(n("3cc4"),Object(C["a"])(w,S,M,!1,null,null,null)),B=N.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bind-enterprise"},[s("div",{staticClass:"bind-inner"},[t.success?t._e():s("div",{staticClass:"bind-body"},[s("h3",[t._v("节点服务器签署企业隶属关系")]),s("div",{staticClass:"server-info"},[s("input",{attrs:{type:"hidden",id:"signResult"}}),s("p",[t._v("服务器名称： "+t._s(t.serverName))]),s("div",[t._v("服务器身份标识："+t._s(t.serverAddress)+" "),s("button",{on:{click:t.copyServerAddress}},[t._v("复制")])]),s("div",[t._v("隶属企业名称： "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.orgName,expression:"orgName"}],staticClass:"condition-int",attrs:{type:"text",placeholder:"隶属企业名称"},domProps:{value:t.orgName},on:{input:function(e){e.target.composing||(t.orgName=e.target.value)}}})])]),s("p",{staticClass:"sign-note"},[t._v("请通过身份签名安全插件，用服务器所属企业身份标识完成签名确认。")]),s("Button",{staticClass:"bind-enterprise-btn",attrs:{type:"primary",size:"large",long:""},on:{click:t.bind}},[t._v("隶属关系绑定")]),t._m(0)],1),t.success?s("div",{staticClass:"bind-body bind-success"},[s("img",{attrs:{src:n("745a"),alt:""}}),s("h3",[t._v("节点服务器企业隶属关系绑定成功！")]),s("div",{staticClass:"chain-btn"},[s("button",{staticClass:"join-chain-btn",on:{click:t.join}},[t._v("加入现有的链")]),s("button",{staticClass:"create-chain-btn",on:{click:t.create}},[t._v("创建新的链")])])]):t._e()])])},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bind-note"},[n("p",[t._v("*请在身份签名安全插件中绑定企业身份标识私钥")])])}],$={data:function(){return{key:"org.brewchain.account.org.pubkey",success:!1,serverName:"",serverAddress:"--",orgName:"",timer:null}},mounted:function(){this.init()},methods:{init:function(){this.initServerInfo()},initServerInfo:function(){var t=this;u({}).then((function(e){e&&1===e.retCode?(t.serverName=e.nodeName,t.serverAddress=e.nodeAddress,sessionStorage.setItem("setup_node_address",t.serverAddress),sessionStorage.setItem("setup_org_name",t.serverName)):t.$Message.error(e.retMsg)})).catch((function(){t.$Message.error("服务器名称地址查询失败")})).then((function(){}))},bind:function(){var t=this;if(this.orgName){var e=(new Date).getTime(),n={sign:e+";"+this.orgName,ts:e};this.$qrCodeAuthDialog.show({url:"man/pbsno.do",data:n,setIntervalFunc:function(){return f({})},func:"setup_node_org"},(function(e){return e.then((function(e){return!(!e||1!==e.retCode)&&(sessionStorage.setItem("setup_org_address",e.orgAddress),sessionStorage.setItem("setup_org_name",e.orgName),t.success=!0,!0)})).catch((function(){return!1}))}))}else this.$Message.error("请输入企业名称")},_bind:function(){},copyServerAddress:function(){var t=this.serverAddress,e=this;this.$copyText(t).then((function(t){e.shareModal=!1,e.$Message.success("复制成功")}),(function(t){e.shareModal=!1,e.$Message.error("复制失败")}))},next:function(){this.$emit("next","step4")},join:function(){this.$emit("next","step4-joinchain")},create:function(){this.$emit("next","step4.1")},destroyed:function(){}}},R=$,G=(n("72ee"),Object(C["a"])(R,E,z,!1,null,null,null)),O=G.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-chain"},[n("div",{staticClass:"new-in"},[n("h3",[t._v("创建新的链实例")]),n("div",{staticClass:"create-form"},[t._m(0),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("IP")]),n("Input",{attrs:{placeholder:"请输入链IP地址"},model:{value:t.ip,callback:function(e){t.ip=e},expression:"ip"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("Memory存储")]),n("Input",{attrs:{placeholder:"请输入链memory参数"},model:{value:t.memory,callback:function(e){t.memory=e},expression:"memory"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("服务器名称")]),n("Input",{attrs:{readonly:"",placeholder:"当前节点服务器名称"},model:{value:t.serverName,callback:function(e){t.serverName=e},expression:"serverName"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("服务器身份标识")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器的身份标识公钥",readonly:""},model:{value:t.serverAddress,callback:function(e){t.serverAddress=e},expression:"serverAddress"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("隶属企业名称")]),n("Input",{attrs:{maxlength:"30",placeholder:"请输入当前节点服务器的所属企业名称",readonly:""},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("隶属企业身份标识")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器的所属企业身份标识公钥",readonly:""},model:{value:t.orgAddress,callback:function(e){t.orgAddress=e},expression:"orgAddress"}})],1)]),n("div",{staticClass:"split-line"}),n("div",{staticClass:"next-step"},[n("Button",{attrs:{long:"",type:"primary",size:"large"},on:{click:t.networkset}},[t._v("下一步")])],1)])])},Q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"clear current-node"},[n("div",{staticClass:"fl"},[t._v("当前节点服务器加入节点网络")])])}],D={data:function(){return{tagCreateChain:!0,serverName:"",serverAddress:"",orgAddress:"",orgName:"",memory:"",ip:""}},mounted:function(){},methods:{init:function(){this.initServerInfo(),this.initOrgInfo()},initServerInfo:function(){var t=this;this.tagCreateChain=!0,u({}).then((function(e){1===e.retCode&&(t.serverName=e.nodeName,t.serverAddress=e.nodeAddress,sessionStorage.setItem("setup_node_name",e.nodeName),sessionStorage.setItem("setup_node_address",e.nodeAddress))})).catch((function(){})).then((function(){t.tagCreateChain=!1}))},initOrgInfo:function(){var t=this;this.tagCreateChain=!0,f({}).then((function(e){1===e.retCode&&(t.orgAddress=e.orgAddress,t.orgName=e.orgName)})).catch((function(){})).then((function(){t.createChain=!1}))},networkset:function(){this.ip?this.memory?(sessionStorage.setItem("setup_ip",this.ip),sessionStorage.setItem("setup_memory",this.memory),this.$emit("next","step4.2")):this.$Message.error("请输入memory"):this.$Message.error("请输入ip地址")},checkUrl:function(t){if(""!==t){var e=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/;return!!e.test(t)}}},created:function(){this.init()}},F=D,L=(n("fced"),Object(C["a"])(F,U,Q,!1,null,"7df6e914",null)),T=L.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chain-league"},[n("div",{staticClass:"chain-league-in"},[n("h3",[t._v("创建新的链实例")]),n("h4",[t._v("区块链联盟委员会信息设置")]),n("div",[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("span",[t._v("联盟委员决议审批规则：")]),n("Tooltip",{attrs:{placement:"top","max-width":"600",transfer:"",content:"选项说明:所有需要联盟委员审批的事务，通过决议的签批规则。* “任意一个联盟委员签批”：联盟委员会成员列表中的任何一个成员签批同意，相应的决议即可通过。* “1/3联盟委员同时签批”：只有联盟委员会成员列表中的任意1/3个成员签批同意，相应的决议方可通过。* “2/3联盟委员同时签批”：只有联盟委员会成员列表中的任意2/3个成员签批同意，相应的决议方可通过。* “所有联盟委员同时签批”： 只有联盟委员会成员列表中的所有成员签批同意，相应的决议方可通过。"}},[n("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1),n("div",[n("RadioGroup",{staticClass:"approval",model:{value:t.acceptLimit,callback:function(e){t.acceptLimit=e},expression:"acceptLimit"}},[n("Radio",{attrs:{label:"0"}},[t._v("任意一个联盟委员签批")]),n("Radio",{attrs:{label:"100"}},[t._v("1/3联盟委员同时签批")]),n("Radio",{attrs:{label:"200"}},[t._v("2/3联盟委员同时签批")]),n("Radio",{attrs:{label:"300"}},[t._v("所有联盟委员同时签批")])],1)],1)]),n("div",[n("div",{staticClass:"league-mem"},[n("span",[t._v("联盟委员会成员：")]),n("button",{staticClass:"fr",on:{click:function(e){t.addModal=!0}}},[n("Icon",{attrs:{type:"md-add-circle"}}),t._v("添加")],1)]),n("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),n("div",{staticClass:"next-step"},[n("Button",{attrs:{size:"large",long:"",type:"primary"},on:{click:t.next}},[t._v("下一步")])],1)]),n("Modal",{attrs:{title:"添加联盟委员会成员"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[n("div",{staticClass:"add-modal-body"},[n("div",[n("Input",{attrs:{placeholder:"请输入委员名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",[n("Input",{attrs:{placeholder:"请输入委员身份标志地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)])])],1)},q=[],H=(n("4160"),n("a434"),n("159b"),{data:function(){var t=this,e=[{title:"委员名称",key:"name"},{title:"委员身份标志地址",key:"address"},{title:"操作",render:function(e,n){return e("a",{on:{click:function(){var e=n.index;t.data1.splice(e,1)}}},"删除")}}],n=[];return{acceptLimit:"0",columns1:e,data1:n,addModal:!1,name:"",address:""}},mounted:function(){this.init()},methods:{init:function(){},next:function(){this.confirm()},confirm:function(){var t=this,e=this.acceptLimit,n=this.data1,s=[],a=[];n.length&&n.forEach((function(t,e){s.push(t.name),a.push(t.address)}));var i={name:s,address:a,acceptLimit:e};v(i).then((function(e){e&&1===e.retCode&&t.$emit("next","step4.3")})).catch((function(e){console.log(e),t.$Message.error("操作失败")}))},ok:function(){var t=this.name.trim(),e=this.address.trim();if(t)if(e){var n={name:t,address:e};this.data1.push(n),this.name="",this.address=""}else this.$Message.error("请输入委员身份地址");else this.$Message.error("请输入委员名称")},cancel:function(){this.name="",this.address=""}}}),Y=H,V=(n("7bfa"),Object(C["a"])(Y,J,q,!1,null,null,null)),K=V.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chain-adminstrator"},["1"==t.step?n("div",{staticClass:"chain-adminstrator-in"},[n("h3",[t._v("创建新的链实例")]),n("h4",[t._v("链管理员设置")]),n("div",[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("span",[t._v("链管理员决议审批规则：")]),n("Tooltip",{attrs:{placement:"top","max-width":"600",transfer:"",content:"选项说明:所有需要链管理员审批的事务，通过决议的签批规则。* “任意一个成员签批”：链管理员列表中的任何一个成员签批同意，相应的决议即可通过。* “1/3成员同时签批”：只有链管理员列表中的任意1/3个成员签批同意，相应的决议方可通过。* “2/3成员同时签批”：只有链管理员列表中的任意2/3个成员签批同意，相应的决议方可通过。* “所有成员同时签批”： 只有链管理员列表中的所有成员签批同意，相应的决议方可通过。"}},[n("Icon",{attrs:{type:"ios-information-circle-outline"}})],1)],1),n("div",[n("RadioGroup",{staticClass:"approval",model:{value:t.acceptLimit,callback:function(e){t.acceptLimit=e},expression:"acceptLimit"}},[n("Radio",{attrs:{label:"0"}},[t._v("任意一个成员签批")]),n("Radio",{attrs:{label:"100"}},[t._v("1/3成员同时签批")]),n("Radio",{attrs:{label:"200"}},[t._v("2/3成员同时签批")]),n("Radio",{attrs:{label:"300"}},[t._v("所有成员同时签批")])],1)],1)]),n("div",[n("div",{staticClass:"adminstrator-mem clear"},[n("span",[t._v("链管理员成员：")]),n("div",{staticClass:"fr"},[n("button",{staticClass:"add-mem",on:{click:function(e){t.addModal=!0}}},[n("Icon",{attrs:{type:"md-add-circle"}}),t._v("添加")],1)])]),n("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),n("div",{staticClass:"next-step"},[n("Button",{attrs:{size:"large",long:"",type:"primary"},on:{click:t.create}},[t._v("确认创建")])],1)]):t._e(),"2"==t.step?n("div",{staticClass:"join-chain-in approval"},[t._m(0),n("h3",[t._v("链实例创建中，请耐心等待...")]),n("div",{staticClass:"time-info"},[n("div",{staticClass:"start-time"},[t._v("开始时间："+t._s(t.startdate))]),n("div",{staticClass:"approval-time"},[t._v("创建耗时："+t._s(t.formatDuration))])]),n("div",{staticClass:"join-bottom-btns"})]):t._e(),"3"==t.step?n("div",{staticClass:"join-chain-in join-success"},[t._m(1),n("h3",[t._v("链实例创建成功！")]),n("div",{staticClass:"hash-info"},[t._v("链实例唯一标识："+t._s(t.hash)+" "),n("button",{staticClass:"copy-hash",on:{click:t.copy}},[t._v("复制")])]),n("div",{staticClass:"time-info"},[n("div",{staticClass:"start-time"},[t._v("开始时间："+t._s(t.startdate))]),n("div",{staticClass:"approval-time"},[t._v("结束时间："+t._s(t.enddate))])]),n("div",{staticClass:"join-bottom-btns"})]):t._e(),n("Modal",{attrs:{title:"添加链管理员"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[n("div",{staticClass:"add-modal-body"},[n("div",[n("Input",{attrs:{placeholder:"请输入链管理员名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",[n("Input",{attrs:{placeholder:"请输入链管理员身份标识"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)])])],1)},Z=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wait-img"},[s("img",{attrs:{src:n("e574"),alt:""}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"success-img"},[s("img",{attrs:{src:n("745a"),alt:""}})])}],W={data:function(){var t=this,e=[{title:"管理员名称",key:"name"},{title:"管理员身份标识公钥",key:"address"},{title:"操作",render:function(e,n){return e("a",{on:{click:function(){var e=n.index;t.data1.splice(e,1)}}},"删除")}}],n=[];return{step:"1",acceptLimit:"0",columns1:e,data1:n,addModal:!1,name:"",address:"",timer:null,end:!1,startdate:"",enddate:"",duration:"",hash:""}},mounted:function(){this.init()},destroyed:function(){this.timer&&clearInterval(this.timer)},computed:{formatDuration:function(){var t=this.duration,e=Math.floor(t/3600),n=Math.floor(t%3600/60),s=t%60;return e?e+"小时"+n+"分钟"+s+"秒":n?n+"分钟"+s+"秒":s+"秒"}},watch:{step:function(t,e){console.log(t,e),2===t&&this.creating()}},methods:{init:function(){this.initStartDate()},initStartDate:function(){var t=this,e=localStorage.getItem("startdate"),n=localStorage.getItem("enddate");e&&n?(this.startdate=e,this.enddate=n,this.step=3):e&&(this.step=2,this.startdate=e,this.timer=setInterval((function(){t.creating()}),1e3))},next:function(t){var e=this;this.step=t,this.timer=setInterval((function(){e.creating()}),1e3)},creating:function(){var t=Date.now(),e=localStorage.getItem("startdate");console.log(e,t),e=new Date(e).getTime(),this.duration=Math.floor((t-e)/1e3),console.log("这里没有查询第0块hash的接口诶～")},create:function(){var t=this,e=this.acceptLimit,n=this.data1,s=[],a=[];n.length&&n.forEach((function(t,e){s.push(t.name),a.push(t.address)}));var i={name:s,address:a,acceptLimit:e};h(i).then((function(e){e&&1===e.retCode&&m({ip:sessionStorage.getItem("setup_ip"),memory:sessionStorage.getItem("setup_memory")}).then((function(){var e=t.$moment().format("YYYY-MM-DD HH:mm:ss");localStorage.setItem("startdate",e),t.startdate=e,t.duration=0,t.next("2")}))})).catch((function(e){console.log(e),t.$Message.error("操作失败")})).then((function(){}))},ok:function(){var t=this.name.trim(),e=this.address.trim();if(t)if(e){var n={name:t,address:e};this.data1.push(n),this.name="",this.address=""}else this.$Message.error("请输入委员身份地址");else this.$Message.error("请输入委员名称")},cancel:function(){this.name="",this.address=""}}},tt=W,et=(n("70bf"),Object(C["a"])(tt,X,Z,!1,null,null,null)),nt=et.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"join-chain"},["1"==t.step?n("div",{staticClass:"join-chain-in input-form"},[n("h3",[t._v("加入现有的链")]),n("div",{staticClass:"clear sub-title"},[n("div",{staticClass:"fl"},[t._v("现有链的信息")]),n("div",{staticClass:"fr",on:{click:t.getServerInfo}},[t._v("获得当前服务器信息")])]),n("div",{staticClass:"join-form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("链的访问地址")]),n("Input",{attrs:{placeholder:"请输入要加入链实例的任意节点服务器访问地址"},model:{value:t.existsUrl,callback:function(e){t.existsUrl=e},expression:"existsUrl"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("IP地址")]),n("Input",{attrs:{placeholder:"请输入节点IP地址"},model:{value:t.ipUrl,callback:function(e){t.ipUrl=e},expression:"ipUrl"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("Memory参数")]),n("Input",{attrs:{placeholder:"请输入节点docker需要的memory地址"},model:{value:t.memory,callback:function(e){t.memory=e},expression:"memory"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("服务器名称")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器名称",readonly:""},model:{value:t.serverName,callback:function(e){t.serverName=e},expression:"serverName"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("服务器身份标识")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器的身份标识公钥"},model:{value:t.nodeAddress,callback:function(e){t.nodeAddress=e},expression:"nodeAddress"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("隶属企业名称")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器的所属企业名称"},model:{value:t.orgName,callback:function(e){t.orgName=e},expression:"orgName"}})],1),n("div",{staticClass:"form-item"},[n("div",{staticClass:"label"},[t._v("隶属企业身份标识")]),n("Input",{attrs:{placeholder:"请输入当前节点服务器的所属企业身份标识公钥"},model:{value:t.orgAddress,callback:function(e){t.orgAddress=e},expression:"orgAddress"}})],1),n("Button",{staticClass:"join-btn",attrs:{long:"",type:"primary"},on:{click:t.apply}},[t._v("申请加入")])],1)]):t._e(),"2"==t.step?n("div",{staticClass:"join-chain-in approval"},[t._m(0),n("h3",[t._v("已经成功提交加入申请，等待审批…")]),n("div",{staticClass:"hash-info"},[t._v("链实例唯一标识：klsjdfljsljfkklsdjfsdklsjdfljsljfkklsdjfsdklsjdfljsljfkklsdjfsd")]),t._m(1)]):t._e(),"3"==t.step?n("div",{staticClass:"join-chain-in join-success"},[t._m(2),n("h3",[t._v("恭喜你，链实例已经加入成功！")]),n("div",{staticClass:"hash-info"},[t._v("链实例唯一标识：klsjdfljsljfkklsdjfsdklsjdfljsljfkklsdjfsdklsjdfljsljfkklsdjfsd")]),t._m(3),n("div",{staticClass:"join-bottom-btns"},[n("Button",{staticClass:"create-file",attrs:{long:"",type:"primary"}},[t._v("创建新的文件存储域")]),n("Button",{staticClass:"join-file",attrs:{long:"",type:"default"}},[t._v("加入现有的文件存储域")])],1)]):t._e()])},at=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wait-img"},[s("img",{attrs:{src:n("e574"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time-info"},[n("div",{staticClass:"start-time"},[t._v("开始时间：2020-1-1 12:00:00")]),n("div",{staticClass:"approval-time"},[t._v("审批等待时间：22分钟15秒")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"success-img"},[s("img",{attrs:{src:n("745a"),alt:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"time-info"},[n("div",{staticClass:"start-time"},[t._v("加入申请提交时间：2020-1-1 12:00:00")]),n("div",{staticClass:"approval-time"},[t._v("加入申请通过时间：2020-1-1 12:00:00")])])}],it={data:function(){return{step:"1",serverName:"",nodeAddress:"",orgAddress:"",orgName:"",existsUrl:"",ipUrl:"",memory:""}},watch:{step:function(t,e){console.log(t,e);var n=this;2===t&&setTimeout((function(){n.step="3"}),3e3)}},mounted:function(){this.init()},methods:{apply:function(){this.existsUrl?this.ipUrl?this.memory?this.serverName?this.serverAddress?this.orgName?this.orgAddress||this.$Message.error("请输入企业身份标识"):this.$Message.error("请输入企业名称"):this.$Message.error("请输入服务器身份标识"):this.$Message.error("请输入服务器名称"):this.$Message.error("请输入docker的memory参数"):this.$Message.error("请输入节点ip地址"):this.$Message.error("请输入链的访问地址")},getServerInfo:function(){},init:function(){this.initServerName()},initServerName:function(){var t=this.$cookie.get("serverName");this.serverName=t},create:function(){var t=this,e="on"===this.approval,n=this.orgName,s={orgName:"",needApprove:e};n?this.$http.post("/fbs/man/pbscn.do",s).then((function(e){e=e.data,"1"===e.retCode&&t.next()})):this.$Message.error("请输入企业名称")}}},rt=it,ot=(n("2e55"),Object(C["a"])(rt,st,at,!1,null,null,null)),ct=ot.exports,lt=[{text:"1.设置服务器名称",name:"step1"},{text:"2.绑定首位服务器管理员",name:"step2"},{text:"3.为服务器签署企业隶属关系",name:"step3"},{text:"4.创建新的链，或加入现有的链",name:"step4",new:[{text:"4.1.节点网络准入设置",name:"step4.1"},{text:"4.2.区块链联盟委员会信息设置",name:"step4.2"},{text:"4.3.链管理员设置",name:"step4.3"}],join:[{text:"加入现有的链",name:"step4-joinchain"}]}],dt={step1:{text:"首页",step:"home"},step2:{text:"设置服务器名称",step:"step1"},step3:{text:"绑定首位服务器管理员",step:"step2"},"step4.1":{text:"为服务器签署企业隶属关系",step:"step3"},"step4-joinchain":{text:"为服务器签署企业隶属关系",step:"step3"},"step4.2":{text:"节点网络准入设置",step:"step4.1"},"step4.3":{text:"区块链联盟委员会信息设置",step:"step4.2"}},ut={components:{"setup-nav":I,"set-server":b,"bind-manager":B,"bind-enterprise":O,"new-chain":T,"join-chain":ct,"new-chain-league":K,"new-chain-administrator":nt},data:function(){return{steps:lt,curStep:"step1",setHeader:dt}},methods:{navClick:function(t){"home"!==t?this.curStep=t:this.$router.push({name:"guide"})},next:function(t){console.log("name",t),this.curStep=t},guide:function(){this.$router.push({name:"guide"})}}},ft=ut,vt=(n("2369"),Object(C["a"])(ft,s,a,!1,null,"0e817b0a",null));e["default"]=vt.exports},dd02:function(t,e,n){"use strict";var s=n("7493"),a=n.n(s);a.a},e49e:function(t,e,n){},e574:function(t,e){t.exports="data:image/png;base64,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"},eff2:function(t,e,n){},fced:function(t,e,n){"use strict";var s=n("8a73"),a=n.n(s);a.a}}]);
//# sourceMappingURL=chunk-09da4fae.564f6809.js.map