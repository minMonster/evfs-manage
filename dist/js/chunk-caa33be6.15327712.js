(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-caa33be6"],{"11ac":function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return d})),n.d(e,"e",(function(){return l}));var a=n("db04"),s=function(t,e){return a["a"].post("cmw/pbqbl.do",t,e)},i=function(t,e){return a["a"].post("cmw/pbqbd.do",t,e)},r=function(t,e){return a["a"].post("cmw/pbqbi.do",t,e)},o=function(t,e){return a["a"].post("cmw/pbqbc.do",t,e)},c=function(t,e){return a["a"].post("cmw/pbqml.do",t,e)},u=function(t,e){return a["a"].post("cmw/pbqrc.do",t,e)},d=function(t,e){return a["a"].post("cmw/pbqrm.do",t,e)},l=function(t,e){return a["a"].post("cmw/pbqbs.do",t,e)}},"3d1d":function(t,e,n){},"3eac":function(t,e,n){},"79f8":function(t,e,n){"use strict";var a=n("3eac"),s=n.n(a);s.a},9657:function(t,e,n){"use strict";var a=n("3d1d"),s=n.n(a);s.a},e8bd:function(t,e,n){},edd6:function(t,e,n){"use strict";var a=n("e8bd"),s=n.n(a);s.a},effa:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit"},[n("div",{staticClass:"audit-inner"},[n("h2",{staticClass:"audit-title clear"},[t._v(" 待审核事项 ")]),n("div",{staticClass:"tab-wrapper",staticStyle:{width:"70%"}},t._l(t.tabs,(function(e,a){return n("div",{key:a,staticClass:"tab-item",class:{active:t.active===a},on:{click:function(e){return t.changeTab(a)}}},[n("Badge",{attrs:{dot:e.num>0}},[n("button",[t._v(t._s(e.name))])])],1)})),0),n("div",{staticClass:"audit-content"},[t.active?n(t.tabs[t.active].nodeName,{tag:"component",attrs:{"review-type":t.tabs[t.active].review_type}}):t._e()],1)])])},s=[],i=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"node-admission"},[t._m(0),n("div",{staticClass:"bg-white padding mb20"},[t._m(1),n("div",[n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])}),r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("业务系统访问许可管理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"25px",color:"#273D52"}},[n("span",[n("b",[t._v("业务域调用访问")]),n("b",[t._v("【黑名单】")]),t._v("： ")])])}],o=(n("fb6a"),n("b0c0"),n("96cf"),n("1da1")),c=n("11ac"),u=n("f96b"),d={data:function(){var t=this,e=[{title:"业务系统名称",key:"name"},{title:"业务域身份标识",key:"address"},{title:"添加时间",key:"join_time",render:function(e,n){var a=n.row;return a.join_time?e("span",t.$moment.unix(a.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",render:function(t,e){var n=e.row,a="--";switch(n.status){case"1":a="待审批";break;case"2":a="已同意";break;case"3":a="审核拒绝";break}return t("span",a)}},{width:120,title:"申请人",key:"applicant_name"},{width:130,title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(a)}}},"查看")}},{title:"操作",render:function(e,n){var a=n.row;if("1"!==a.status||"1"!==a.user_status)return e("span","--");var s=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(a)}}},"同意"),i=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(a)}}},"拒绝");return e("div",{class:"opt-btns"},[s,i])}}];return{listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10},form:{name:"",address:""},switch1:"0"}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;this.listLoading=!0,c["h"]({menu:"biz",reviewType:"biz_node",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address+" <br>time："+t.time,oktext:"关闭"})},agree:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id,domainId:sessionStorage.getItem("fbs_biz_id")},n.next=3,u["a"]({method:"BizDomainBizSysAgreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,e.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id,domainId:sessionStorage.getItem("fbs_biz_id")},n.next=3,u["a"]({method:"BizDomainDisagreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},ok:function(){},cancel:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},l=d,f=(n("edd6"),n("2877")),m=Object(f["a"])(l,i,r,!1,null,"d4e89246",null),g=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"business-detail"},[t._m(0),n("div",{staticClass:"bg-white padding",staticStyle:{"margin-bottom":"30px",color:"#373737"}},[n("span",[t._v("信息监管：")]),n("RadioGroup",{staticStyle:{margin:"0 20px"},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}},[n("Radio",{staticStyle:{"margin-right":"40px"},attrs:{label:"1"}},[t._v("允许")]),n("Radio",{attrs:{label:"0"}},[t._v("禁止")])],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("允许信息监管：允许")]),t._m(1)],1),t._m(2)])],1),n("div",{staticClass:"bg-white padding",staticStyle:{"margin-bottom":"20px",color:"#373737"}},[n("div",{staticStyle:{"margin-bottom":"20px"}},[n("span",[t._v("文件权限控制：")]),n("RadioGroup",{staticStyle:{margin:"0 20px"},model:{value:t.switch2,callback:function(e){t.switch2=e},expression:"switch2"}},[n("Radio",{staticStyle:{"margin-right":"40px"},attrs:{label:"1"}},[t._v("允许")]),n("Radio",{attrs:{label:"0"}},[t._v("禁止")])],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("允许文件删除：允许")]),t._m(3)],1),t._m(4)])],1)]),n("div",{staticClass:"padding bg-white mb20"},[n("div",[n("span",[t._v("允许任何人域内保存文件：")]),n("RadioGroup",{staticStyle:{margin:"0 20px"},model:{value:t.switch3,callback:function(e){t.switch3=e},expression:"switch3"}},[n("Radio",{staticStyle:{"margin-right":"40px"},attrs:{label:"1"}},[t._v("允许")]),n("Radio",{attrs:{label:"0"}},[t._v("禁止")])],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("允许任何人域内保存文件：允许")]),t._m(5)],1),t._m(6)])],1)])])},p=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("业务域内文件操作规则设置")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("申请人： 张丽"),n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn"},[t._v("拒绝")]),n("button",{staticClass:"agree-btn"},[t._v("同意")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("申请人： 张丽"),n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn"},[t._v("拒绝")]),n("button",{staticClass:"agree-btn"},[t._v("同意")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("申请人： 张丽"),n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn"},[t._v("拒绝")]),n("button",{staticClass:"agree-btn"},[t._v("同意")])])])}],v={data:function(){return{switch1:"0",switch2:"0",switch3:"0",total:90}},watch:{},computed:{},mounted:function(){this.init()},methods:{init:function(){},pageChange:function(t){}}},b=v,_=Object(f["a"])(b,h,p,!1,null,null,null),w=_.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"business-detail"},[t._m(0),n("div",{staticClass:"bg-white padding mb20"},[t._m(1),n("div",[n("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{total:t.total},on:{"on-change":t.pageChange}})],1)])]),n("div",{staticClass:"bg-white padding mb20",staticStyle:{"margin-bottom":"20px"}},[t._m(2),n("div",[n("Table",{attrs:{columns:t.columns2,data:t.data2}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{total:t.total},on:{"on-change":t.pageChange}})],1)])]),n("div",{staticClass:"bg-white padding mb20"},[t._m(3),n("div",{staticStyle:{overflow:"auto"}},[n("Table",{staticStyle:{"min-width":"1300px"},attrs:{columns:t.columns3,data:t.data3}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{total:t.total},on:{"on-change":t.pageChange}})],1)])])])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("域内数据治理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",[n("b",[t._v("文件监管")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",[n("b",[t._v("数据结构监管")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",[n("b",[t._v("文件拥有者转移待审列表")])])])}],C={data:function(){var t=this,e=[{title:"文件名称",key:"name"},{title:"文件链上唯一标识",key:"address"},{title:"状态",key:"statuslabel"},{width:120,title:"申请人",key:"applicant"},{width:130,title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.adds(a)}}},"查看")}},{title:"操作",render:function(t,e){var n=t("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){}}},"同意"),a=t("a",{domProps:{href:"javascript:;"},on:{click:function(){}}},"拒绝");return t("div",{class:"opt-btns"},[n,a])}}],n=[{name:"测试.doc",address:"00fb0a...ef34a",applicant:"张力",statuslabel:"解冻审核中",status:"1"},{name:"照片.jpg",address:"00fb0a...eda4e",applicant:"张力",statuslabel:"冻结审核中",status:"2"},{name:"视频.MP4",address:"00fb0a...eac4f",applicant:"张力",statuslabel:"解冻审核中",status:"4"},{name:"音频.MP3",address:"00fb0a...a43fe",applicant:"张力",statuslabel:"冻结审核中",status:"3"}],a=[{title:"数据链上唯一标识",key:"address"},{title:"状态",key:"statuslabel"},{width:120,title:"申请人",key:"applicant"},{width:130,title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.addlook(a)}}},"查看")}},{title:"操作",render:function(t,e){var n=t("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){}}},"同意"),a=t("a",{domProps:{href:"javascript:;"},on:{click:function(){}}},"拒绝");return t("div",{class:"opt-btns"},[n,a])}},{title:"审核结果",render:function(t,e){var n=t("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){}}},"同意"),a=t("a",{domProps:{href:"javascript:;"},on:{click:function(){}}},"拒绝");return t("div",{class:"opt-btns"},[n,a])}}],s=[{address:"00fb0a...ef34a",applicant:"张力",statuslabel:"解冻审核中",status:"1"},{address:"00fb0a...eda4e",applicant:"张力",statuslabel:"冻结审核中",status:"2"},{address:"00fb0a...eac4f",applicant:"张力",statuslabel:"解冻审核中",status:"4"},{address:"00fb0a...a43fe",applicant:"张力",statuslabel:"冻结审核中",status:"3"}],i=[{title:"文件名称",key:"name"},{title:"文件链上唯一标识",key:"address"},{title:"原始拥有者姓名",key:"oldname"},{title:"原始拥有者身份标识",key:"oldid"},{title:"新拥有者姓名",key:"newname"},{title:"新拥有者身份标识",key:"newid"},{width:130,title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.addLook(a)}}},"查看")}},{title:"操作",render:function(t,e){var n=t("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){}}},"同意"),a=t("a",{domProps:{href:"javascript:;"},on:{click:function(){}}},"拒绝");return t("div",{class:"opt-btns"},[n,a])}}],r=[{name:"测试122.doc",address:"00fb0a...ef34a",oldname:"张力",oldid:"00cc0b...ae7ca",newname:"赵宇",newid:"00cc0b...af2c4"}];return{switch1:"0",switch2:"0",switch3:"0",total:90,columns1:e,data1:n,columns2:a,data2:s,columns3:i,data3:r}},watch:{},computed:{},mounted:function(){this.init()},methods:{init:function(){},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address,oktext:"关闭"})},addLook:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address,oktext:"关闭"})},addlook:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.applicant+"<br> address："+t.address,oktext:"关闭"})},pageChange:function(t){}}},k=C,I=Object(f["a"])(k,x,y,!1,null,null,null),$=I.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"business-detail"},[t._m(0),n("div",{staticClass:"bg-white padding"},[t._m(1),n("div",[n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])},z=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("业务域内合约治理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-title"},[n("span",[n("b",[t._v("合约列表")])])])}],R={data:function(){var t=this,e=[{title:"合约名称",key:"name"},{title:"合约链上唯一标识",key:"address"},{title:"发布时间",key:"join_time",render:function(e,n){var a=n.row;return a.join_time?e("span",t.$moment.unix(a.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",render:function(t,e){var n=e.row,a="--";switch(n.status){case"1":a="待审批";break;case"2":a="已同意";break;case"3":a="审核拒绝";break}return t("span",a)}},{width:120,title:"申请人",key:"applicant_name"},{width:130,title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(a)}}},"查看")}},{title:"操作",render:function(e,n){var a=n.row;if("1"!==a.status||"1"!==a.user_status)return e("span","--");var s=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(a)}}},"同意"),i=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(a)}}},"拒绝");return e("div",{class:"opt-btns"},[s,i])}}];return{listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10}}},watch:{},computed:{},mounted:function(){this.init()},methods:{init:function(){var t=this;this.listLoading=!0,c["h"]({menu:"biz",reviewType:"biz_contract",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,e.rows&&(t.oldList=e.rows,t.page.total=t.oldList.length,t.getList())})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},agree:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id,domainId:sessionStorage.getItem("fbs_biz_id")},n.next=3,u["a"]({method:"BizDomainContractEnableAgreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id,domainId:sessionStorage.getItem("fbs_biz_id")},n.next=3,u["a"]({method:"BizDomainDisagreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},S=R,j=Object(f["a"])(S,M,z,!1,null,null,null),L=j.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alliance"},[n("h2",{staticClass:"content-title clear"},[t._v(" 业务域管理员管理 ")]),n("div",[t.rule?n("div",{staticClass:"bg-white padding",staticStyle:{"margin-bottom":"20px"}},[t._m(0),n("RadioGroup",{staticClass:"approval",model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:0}},[t._v("任意一个业务域管理员签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:100}},[t._v("1/3业务域管理员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:200}},[t._v("2/3业务域管理员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:300}},[t._v("所有业务域管理员同时签批")])],1)],1)],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("业务域管理员决议审批规则："+t._s(t.ruleJson[t.old_rule]))]),n("div",[t._v("申请人： "+t._s(t.applicant_name)),n("span",[t._v("审核通过人： "),n("a",{on:{click:t.showRule}},[t._v("查看")])])])],1),n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn",on:{click:t.refuseRule}},[t._v("拒绝")]),n("button",{staticClass:"agree-btn",on:{click:t.agreeRule}},[t._v("同意")])])])])],1):t._e(),n("div",{staticClass:"bg-white padding"},[t._m(1),n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}}),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])],1),n("Modal",{attrs:{title:"添加管理"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[n("div",{staticClass:"add-modal-body"},[n("div",[n("Input",{attrs:{placeholder:"请输入管理员名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("div",[n("Input",{attrs:{placeholder:"请输入管理员身份标志地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)])])],1)])},D=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"15px",color:"#273D52","font-weight":"600"}},[n("span",[t._v("业务域管理员决议审批规则：")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"league-mem"},[n("span",[t._v("业务域管理员列表")])])}],B={data:function(){var t=this,e=[{title:"管理员名称",key:"name"},{title:"管理员身份标志地址",key:"address"},{title:"添加时间",key:"time",render:function(e,n){var a=n.row;return a.join_time?e("span",t.$moment.unix(a.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",render:function(t,e){var n=e.row,a="--";switch(n.status){case"1":a="待审批";break;case"2":a="已同意";break;case"3":a="审核拒绝";break}return t("span",a)}},{title:"申请人",key:"applicant_name"},{title:"审核通过人",render:function(e,n){var a=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(a)}}},"查看")}},{title:"操作",render:function(e,n){var a=n.row;if("1"!==a.status||"1"!==a.user_status)return e("span","--");var s=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(a)}}},"同意"),i=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(a)}}},"拒绝");return e("div",{class:"opt-btns"},[s,i])}}],n={0:"任意一个业务域管理员签批",100:"1/3业务域管理员同时签批",200:"2/3业务域管理员同时签批",300:"所有业务域管理员同时签批"};return{addModal:!1,ruleJson:n,rule:"",old_rule:"",applicant_name:"",listLoading:!1,columns:e,oldList:[],review_rule:"",list:[],page:{total:1,current:1,size:10},form:{name:"",address:""}}},mounted:function(){this.init()},watch:{},computed:{},methods:{showRule:function(){var t={review_id:this.review_rule};this.$QueryApprovedDialog.show(t)},init:function(){var t=this;c["h"]({reviewType:"biz_manage_rule",menu:"biz",address:sessionStorage.getItem("fbs_address")}).then((function(e){if(e.rows){var n=e.rows[0];console.log(n),t.rule=n.rule||"",t.old_rule=n.old_rule||"",t.review_rule=n.review_id}else t.rule=!1})),this.listLoading=!0,c["h"]({reviewType:"biz_manage",menu:"biz",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,e.rows&&(t.oldList=e.rows,t.page.total=t.oldList.length,t.getList())})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},agree:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_biz_id"),reqId:t.review_id},n.next=3,u["a"]({method:"BizDomainMemberAgreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_biz_id"),reqId:t.review_id},n.next=3,u["a"]({method:"BizDomainDisagreeContractTxReq",jsBody:JSON.stringify(a)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:s=n.sent,s&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return u["b"]({txId:s.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},agreeRule:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_biz_id"),reqId:t.review_rule},e.next=3,u["a"]({method:"BizDomainRuleAgreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:a=e.sent,a&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return u["b"]({txId:a.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,t.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},refuseRule:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_biz_id"),reqId:t.review_rule},e.next=3,u["a"]({method:"BizDomainDisagreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:a=e.sent,a&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return u["b"]({txId:a.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,t.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},ok:function(){},cancel:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},q=B,E=(n("79f8"),Object(f["a"])(q,T,D,!1,null,"ff1fda84",null)),P=E.exports,O={components:{permission:g,rule:w,file:$,contract:L,manager:P},data:function(){return{tabs:{"business-permission":{name:"业务系统准入",num:0,nodeName:"permission"},biz_file:{name:"文件操作规则",num:0,nodeName:"rule",review_type:"biz_file"},"business-contract":{name:"域内合约治理",num:0,nodeName:"contract",review_type:"biz_contract"},"business-manager":{name:"域管理员",num:0,nodeName:"manager",review_type:"biz_manage"}},active:"business-manager"}},watch:{},mounted:function(){this.init()},methods:{init:function(){var t=this;c["i"]({menu:"biz",address:sessionStorage.getItem("fbs_address")}).then((function(e){e.rows&&e.rows.forEach((function(e){for(var n in t.tabs)t.tabs[n].review_type===e.review_type&&(t.tabs[n].num=e.num,console.log(n))}))}))},changeTab:function(t){console.log(t),this.active=t}}},A=O,N=(n("9657"),Object(f["a"])(A,a,s,!1,null,"32f785a4",null));e["default"]=N.exports},fb6a:function(t,e,n){"use strict";var a=n("23e7"),s=n("861d"),i=n("e8b5"),r=n("23cb"),o=n("50c4"),c=n("fc6a"),u=n("8418"),d=n("b622"),l=n("1dde"),f=n("ae40"),m=l("slice"),g=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),p=[].slice,v=Math.max;a({target:"Array",proto:!0,forced:!m||!g},{slice:function(t,e){var n,a,d,l=c(this),f=o(l.length),m=r(t,f),g=r(void 0===e?f:e,f);if(i(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?s(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(l,m,g);for(a=new(void 0===n?Array:n)(v(g-m,0)),d=0;m<g;m++,d++)m in l&&u(a,d,l[m]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-caa33be6.15327712.js.map