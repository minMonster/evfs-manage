(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c96c186"],{"0228":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit"},[n("div",{staticClass:"audit-inner"},[n("h2",{staticClass:"audit-title clear"},[t._v(" 待审核事项 ")]),n("div",{staticClass:"tab-wrapper",staticStyle:{width:"70%"}},t._l(t.tabs,(function(e,s){return n("div",{key:s,staticClass:"tab-item",class:{active:t.active===s},on:{click:function(e){return t.changeTab(s)}}},[n("Badge",{attrs:{dot:e.num>0}},[n("button",[t._v(t._s(e.name))])])],1)})),0),n("div",{staticClass:"audit-content"},[t.active?n(t.tabs[t.active].nodeName,{tag:"component",attrs:{"review-type":t.tabs[t.active].review_type}}):t._e()],1)])])},a=[],r=(n("4160"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"rule"},[n("h2",{staticClass:"content-title"},[t._v("文件存储域固化存储规则管理")]),n("div",{staticClass:"padding bg-white",staticStyle:{"margin-bottom":"20px"}},[t._m(0),n("div",[n("Row",[n("Col",{attrs:{span:8}},[t._v(" 文件碎片化数量： "),n("Select",{staticStyle:{display:"inline-block",width:"100px","margin-left":"20px","vertical-align":"middle"},attrs:{disabled:""},model:{value:t.select1,callback:function(e){t.select1=e},expression:"select1"}},t._l(10,(function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),n("Col",{attrs:{span:8}},[t._v(" 文件保存副本数量： "),n("Icon",{attrs:{type:"ios-help-circle-outline"}}),n("Select",{staticStyle:{display:"inline-block",width:"100px","margin-left":"20px","vertical-align":"middle"},attrs:{disabled:""},model:{value:t.select2,callback:function(e){t.select2=e},expression:"select2"}},t._l(5,(function(e){return n("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1)],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("文件碎片化数量：3")]),n("div",[t._v("文件保存副本数量：4")]),t._m(1)],1),t._m(2)])]),n("div",{staticClass:"padding bg-white"},[t._m(3),n("div",[n("Row",[n("Col",{attrs:{span:6}},[t._v(" 文件副本在不同site分散保存： "),n("Icon",{attrs:{type:"ios-help-circle-outline"}})],1),n("Col",{attrs:{span:10}},[n("RadioGroup",{staticClass:"approval",staticStyle:{width:"50%"},model:{value:t.myswitch,callback:function(e){t.myswitch=e},expression:"myswitch"}},[n("Row",{staticStyle:{"margin-right":"20px"}},[n("Col",{attrs:{span:"12"}},[n("Radio",{attrs:{label:"1"}},[t._v("开启")])],1),n("Col",{attrs:{span:"12"}},[n("Radio",{attrs:{label:"0"}},[t._v("关闭")])],1)],1)],1)],1)],1)],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("文件副本在不同site分散保存：开启")]),t._m(4)],1),t._m(5)])])])}),i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-title"},[n("span",[t._v("文件高可用")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("申请人： 张丽"),n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn"},[t._v("拒绝")]),n("button",{staticClass:"agree-btn"},[t._v("同意")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"section-title"},[n("span",[t._v("文件灾备")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("申请人： 张丽"),n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn"},[t._v("拒绝")]),n("button",{staticClass:"agree-btn"},[t._v("同意")])])])}],o={data:function(){return{select1:5,select2:3,myswitch:"0"}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){}}},c=o,u=n("2877"),d=Object(u["a"])(c,r,i,!1,null,"5fcc9ea2",null),l=d.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chain-configure"},[n("h2",{staticClass:"content-title clear"},[t._v("节点网络准入许可管理")]),n("div",{staticClass:"split-line"}),n("div",{staticClass:"encryption-wrapper padding bg-white",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticStyle:{overflow:"auto"}},[t._m(0),n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"20px",color:"#273D52"}},[n("span",[t._v(" 准入节点服务器列表： ")])])}],m=(n("fb6a"),n("96cf"),n("1da1")),h=n("9aa7"),p=n("f96b"),v={data:function(){var t=this,e=[{title:"隶属企业名称",key:"name",width:150},{title:"服务器身份标识",key:"address",width:150},{title:"节点类型",key:"node_type",width:100},{title:"数据存管域名称",key:"storage_name",width:100},{title:"添加时间",key:"join_time",width:100,render:function(e,n){var s=n.row;return s.join_time?e("span",t.$moment.unix(s.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",width:100,render:function(t,e){var n=e.row,s="--";switch(n.status){case"1":s="待审批";break;case"2":s="已同意";break;case"3":s="审核拒绝";break}return t("span",s)}},{title:"申请人",key:"applicant_name",width:200},{title:"审核通过人",width:100,render:function(e,n){var s=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(s)}}},"查看")}},{title:"操作",width:120,render:function(e,n){var s=n.row;if("1"!==s.status)return e("span","--");var a=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(s)}}},"同意"),r=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(s)}}},"拒绝");return e("div",{class:"opt-btns"},[a,r])}},{title:"审核结果",key:"user_status",width:100,render:function(t,e){var n=e.row,s="--";switch(n.user_status){case"1":s="待审批";break;case"2":s="已同意";break;case"3":s="审核拒绝";break}return t("span",s)}}];return{columns:e,listLoading:!1,oldList:[],list:[],page:{total:1,current:1,size:10}}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;this.listLoading=!0,h["d"]({menu:"storage",reviewType:"storage_node",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},agree:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id,domainId:sessionStorage.getItem("fbs_storage_id")},n.next=3,p["a"]({method:"BizDomainRuleAgreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id},n.next=3,p["a"]({method:"CommitteeDisagreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},pageChange:function(t){this.page.current=t,this.getList()}}},_=v,b=(n("7e63"),Object(u["a"])(_,g,f,!1,null,"19c80b62",null)),w=b.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"data-permission"},[t._m(0),n("div",{staticClass:"bg-white",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"chain-content"},[n("div",{staticClass:"sub-content-title"},[t._v("存管域内存储存量许可信息")]),n("div",{staticClass:"chain-content-item"},[n("Row",[n("Col",{attrs:{span:"8"}},[n("p",[t._v("5.00"),n("span",[t._v("TB")])]),n("div",[t._v("存储许可总容量")])]),n("Col",{attrs:{span:"8"}},[n("p",[t._v("1.22"),n("span",[t._v("TB")])]),n("div",[t._v("已发放存储许可容量")])]),n("Col",{attrs:{span:"8"}},[n("p",[t._v("3.78 "),n("span",[t._v("TB")])]),n("div",[t._v("未发存储许可容量")])])],1)],1)])]),n("div",{staticClass:"padding bg-white mb20"},[t._m(1),n("div",[n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("数据存管域运行许可证管理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",{staticStyle:{color:"#273D52","font-weight":"600","margin-bottom":"30px",display:"block"}},[t._v("存管域内存储容量许可分布信息")])])}],C=(n("b0c0"),{data:function(){var t=this,e=[{title:"隶属企业名称",key:"name"},{title:"服务器身份标识",key:"address"},{title:"现有许可存储容量",key:"capacity_license"},{title:"申请新增存储容量",key:"applay_capacity_license"},{title:"申请状态",key:"user_status",render:function(t,e){var n=e.row,s="--";switch(n.status){case"1":s="待审批";break;case"2":s="已同意";break;case"3":s="审核拒绝";break}return t("span",s)}},{title:"申请人",key:"applicant_name"},{title:"审核通过人",render:function(e,n){var s=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(s)}}},"查看")}},{title:"操作",width:120,render:function(e,n){var s=n.row;if("1"!==s.status)return e("span","--");var a=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(s)}}},"同意"),r=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(s)}}},"拒绝");return e("div",{class:"opt-btns"},[a,r])}}];return{input1:"10000",input2:"10",select1:"MB",listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10},total:100}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;this.listLoading=!0,h["d"]({menu:"storage",reviewType:"storage_license",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},agree:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$Message.error("没有接口"));case 1:case"end":return t.stop()}}),t)})))()},refuse:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.$Message.error("没有接口"));case 1:case"end":return t.stop()}}),t)})))()},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address+" <br>time："+t.time,oktext:"关闭"})},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}}),k=C,I=Object(u["a"])(k,x,y,!1,null,"45910592",null),$=I.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"data-business"},[t._m(0),n("div",{staticClass:"padding bg-white",staticStyle:{"margin-bottom":"20px"}},[t._m(1),n("div",[n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("数据存管域内业务域授权管理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"10px",color:"#273D52"}},[n("span",{staticStyle:{color:"#273D52","font-weight":"600",display:"block","margin-bottom":"30px"}},[t._v("业务域列表")])])}],S={data:function(){var t=this,e=[{title:"业务域名称",key:"name"},{title:"业务域唯一标识",key:"address"},{title:"创建时间",key:"join_time",render:function(e,n){var s=n.row;return s.join_time?e("span",t.$moment.unix(s.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",render:function(t,e){var n=e.row,s="--";switch(n.status){case"1":s="待审批";break;case"2":s="已同意";break;case"3":s="审核拒绝";break}return t("span",s)}},{title:"申请人",key:"applicant_name"},{title:"审核通过人",render:function(e,n){var s=n.row;return e("a",{on:{click:function(){t.adds(s)}}},"查看")}},{title:"操作",width:120,render:function(e,n){var s=n.row;if("1"!==s.status)return e("span","--");var a=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(s)}}},"同意"),r=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(s)}}},"拒绝");return e("div",{class:"opt-btns"},[a,r])}}];return{acceptLimit:"1/3",myswitch:"1",name:"",address:"",addModal:!1,listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10},form:{name:"",address:""},switch1:"0"}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;this.listLoading=!0,h["d"]({menu:"storage",reviewType:"storage_biz",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},agree:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_id},n.next=3,p["a"]({method:"DSDomainBizDomainAgreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_id},n.next=3,p["a"]({method:"DSDomainDisagreeContractTxReq",domainId:sessionStorage.getItem("fbs_storage_id"),jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address+" <br>time："+t.time,oktext:"关闭"})},ok:function(){},cancel:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},L=S,j=(n("22bd"),Object(u["a"])(L,M,R,!1,null,"19a09906",null)),T=j.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alliance"},[n("h2",{staticClass:"content-title clear"},[t._v(" 数据存管域管理员管理 ")]),n("div",[t.rule?n("div",{staticClass:"bg-white padding",staticStyle:{"margin-bottom":"20px"}},[t._m(0),n("RadioGroup",{staticClass:"approval",model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:0}},[t._v("任意一个联盟委员签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:100}},[t._v("1/3联盟委员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:200}},[t._v("2/3联盟委员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:300}},[t._v("所有联盟委员同时签批")])],1)],1)],1),n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("联盟委员决议审批规则："+t._s(t.ruleJson[t.old_rule]))]),n("div",[t._v("申请人： "+t._s(t.applicant_name)),n("span",[t._v("审核通过人： "),n("a",{on:{click:t.showRule}},[t._v("查看")])])])],1),n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn",on:{click:t.refuseRule}},[t._v("拒绝")]),n("button",{staticClass:"agree-btn",on:{click:t.agreeRule}},[t._v("同意")])])])])],1):t._e(),n("div",{staticClass:"bg-white padding"},[t._m(1),n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}}),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])],1),n("Modal",{attrs:{title:"添加管理"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[n("div",{staticClass:"add-modal-body"},[n("div",[n("Input",{attrs:{placeholder:"请输入管理员名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("div",[n("Input",{attrs:{placeholder:"请输入管理员身份标志地址"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)])])],1)])},q=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"margin-bottom":"15px",color:"#273D52","font-weight":"600"}},[n("span",[t._v("数据存管域管理员决议审批规则：")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"league-mem"},[n("span",[t._v("数据存管域管理员列表")])])}],z={data:function(){var t=this,e=[{title:"管理员名称",key:"name"},{title:"管理员身份标志地址",key:"address"},{title:"添加时间",key:"time",render:function(e,n){var s=n.row;return s.join_time?e("span",t.$moment.unix(s.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status",render:function(t,e){var n=e.row,s="--";switch(n.status){case"1":s="待审批";break;case"2":s="已同意";break;case"3":s="审核拒绝";break}return t("span",s)}},{title:"申请人",key:"applicant_name"},{title:"审核通过人",render:function(e,n){var s=n.row;return e("a",{on:{click:function(){t.$QueryApprovedDialog.show(s)}}},"查看")}},{title:"操作",render:function(e,n){var s=n.row;if("1"!==s.status)return e("span","--");var a=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(s)}}},"同意"),r=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(s)}}},"拒绝");return e("div",{class:"opt-btns"},[a,r])}}],n={0:"任意一个联盟委员签批",100:"1/3联盟委员同时签批",200:"2/3联盟委员同时签批",300:"所有联盟委员同时签批"};return{addModal:!1,ruleJson:n,rule:"",old_rule:"",applicant_name:"",listLoading:!1,columns:e,oldList:[],review_rule:"",list:[],page:{total:1,current:1,size:10},form:{name:"",address:""}}},mounted:function(){this.init()},watch:{},computed:{},methods:{showRule:function(){var t={review_id:this.review_rule};this.$QueryApprovedDialog.show(t)},init:function(){var t=this;h["d"]({reviewType:"storage_manage_rule",menu:"storage",address:sessionStorage.getItem("fbs_address")}).then((function(e){if(e.rows){var n=e.rows[0];console.log(n),t.rule=n.rule||"",t.old_rule=n.old_rule||"",t.review_rule=n.review_id}else t.rule=!1})),this.listLoading=!0,h["d"]({menu:"storage",reviewType:"storage_manage",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address+" <br>time："+t.time,oktext:"关闭"})},agree:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_id},n.next=3,p["a"]({method:"DSDomainMemberAgreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_id},n.next=3,p["a"]({method:"DSDomainDisagreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},agreeRule:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_rule},e.next=3,p["a"]({method:"DSDomainRuleAgreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:s=e.sent,s&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return p["b"]({txId:s.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,t.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},refuseRule:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),domainId:sessionStorage.getItem("fbs_storage_id"),reqId:t.review_rule},e.next=3,p["a"]({method:"DSDomainDisagreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:s=e.sent,s&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return p["b"]({txId:s.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,t.init(),!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},ok:function(){},cancel:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},B=z,O=(n("1542"),Object(u["a"])(B,D,q,!1,null,"767e4e71",null)),A=O.exports,E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"data-manager"},[t._m(0),t.rule?n("div",{staticClass:"padding bg-white",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticStyle:{"margin-bottom":"20px",color:"#273D52"}},[n("span",[t._v("联盟委员决议审批规则：")]),n("Tooltip",{attrs:{placement:"top","max-width":"600",transfer:"",content:"选项说明:所有需要联盟委员审批的事务，通过决议的签批规则。* “任意一个联盟委员签批”：联盟委员会成员列表中的任何一个成员签批同意，相应的决议即可通过。* “1/3联盟委员同时签批”：只有联盟委员会成员列表中的任意1/3个成员签批同意，相应的决议方可通过。* “2/3联盟委员同时签批”：只有联盟委员会成员列表中的任意2/3个成员签批同意，相应的决议方可通过。* “所有联盟委员同时签批”： 只有联盟委员会成员列表中的所有成员签批同意，相应的决议方可通过。"}},[n("Icon",{attrs:{type:"ios-help-circle-outline"}})],1)],1),n("RadioGroup",{staticClass:"approval",model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"0"}},[t._v("任意一个联盟委员签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"100"}},[t._v("1/3联盟委员同时签批")])],1)],1),n("Row",[n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"200"}},[t._v("2/3联盟委员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"300"}},[t._v("所有联盟委员同时签批")])],1)],1)],1),t.old_rule?n("div",{staticClass:"audit-item"},[n("div",{staticClass:"audit-item-content"},[n("P",[t._v("变更前：")]),n("div",[t._v("联盟委员决议审批规则："+t._s(t.ruleJson[t.old_rule]))]),n("div",[t._v("申请人： "+t._s(t.applicant_name)),t._m(1)])],1),n("div",{staticClass:"audit-item-btns"},[n("div",{staticClass:"btn-inner"},[n("button",{staticClass:"refuse-btn",on:{click:t.refuseRule}},[t._v("拒绝")]),n("button",{staticClass:"agree-btn",on:{click:t.agreeRule}},[t._v("同意")])])])]):t._e()],1):t._e(),n("div",{staticClass:"padding bg-white"},[n("div",[t._m(2),n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}})],1),n("div",{staticClass:"page"},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])])])},P=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-title"},[n("span",[t._v("区块链联盟委员会管理")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t._v("审核通过人： "),n("a",{attrs:{href:"javascript:;"}},[t._v("查看")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"league-mem"},[n("span",[t._v("联盟委员会成员操作明细：")])])}],J={data:function(){var t=this,e=[{title:"委员名称",key:"name"},{title:"委员身份标志地址",key:"address"},{title:"添加时间",key:"join_time",render:function(e,n){var s=n.row;return s.join_time?e("span",t.$moment.unix(s.join_time/1e3).format("YYYY-MM-DD HH:mm:ss")):e("span","--")}},{title:"状态",key:"status"},{title:"申请人",key:"applicant_name"},{title:"审核通过人",render:function(e,n){var s=n.row;return e("a",{on:{click:function(){t.adds(s)}}},"查看")}},{title:"操作",width:120,render:function(e,n){var s=n.row;if("1"!==s.status)return e("span","--");var a=e("a",{style:{marginRight:"8px"},domProps:{href:"javascript:;"},on:{click:function(){t.agree(s)}}},"同意"),r=e("a",{domProps:{href:"javascript:;"},on:{click:function(){t.refuse(s)}}},"拒绝");return e("div",{class:"opt-btns"},[a,r])}}],n={0:"任意一个联盟委员签批",100:"1/3联盟委员同时签批",200:"2/3联盟委员同时签批",300:"所有联盟委员同时签批"};return{ruleJson:n,rule:"",old_rule:"",review_rule:"",applicant_name:"",listLoading:!1,columns:e,oldList:[],list:[],page:{total:1,current:1,size:10},form:{name:"",address:""}}},mounted:function(){this.init()},watch:{},computed:{},methods:{init:function(){var t=this;h["d"]({reviewType:"chaincommittee",menu:"chain_committee_rule",address:sessionStorage.getItem("fbs_address")}).then((function(e){if(e.rows){var n=e.rows[0];t.rule=n.rule||"",t.review_rule=n.review_id,t.old_rule=n.old_rule||""}else t.rule=!1})),this.listLoading=!0,h["d"]({menu:"chaincommittee",reviewType:"chain_manager",address:sessionStorage.getItem("fbs_address")}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList()})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}))},agree:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id},n.next=3,p["a"]({method:"CommitteeDisagreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},refuse:function(t){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s={from:sessionStorage.getItem("fbs_address"),reqId:t.review_id},n.next=3,p["a"]({method:"CommitteeDisagreeContractTxReq",jsBody:JSON.stringify(s)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return p["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 4===t.status||5===t.status||6===t.status?(e.$Message.error(t.remark),!0):3===t.status&&(e.$Message.success("修改成功"),e.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},agreeRule:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),reqId:t.review_rule},e.next=3,p["a"]({method:"CommitteeRuleAgreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:s=e.sent,s&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return p["b"]({txId:s.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},refuseRule:function(){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),reqId:t.review_rule},e.next=3,p["a"]({method:"CommitteeDisagreeContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:s=e.sent,s&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:s,setIntervalFunc:function(){return p["b"]({txId:s.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 4===e.status||5===e.status||6===e.status?(t.$Message.error(e.remark),!0):3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},adds:function(t){this.$Modal.confirm({title:"已审核人列表",content:"name："+t.name+"<br> address："+t.address+" <br>time："+t.time,oktext:"关闭"})},ok:function(){},cancel:function(){},getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},N=J,Y=(n("8db7"),Object(u["a"])(N,E,P,!1,null,"8f13415e",null)),F=Y.exports,H={components:{rule:l,node:w,permission:$,business:T,manager:A,alliance:F},data:function(){return{tabs:{"data-node":{name:"节点准入",num:0,nodeName:"node",review_type:"storage"},"data-permission":{name:"运营许可证",num:0,nodeName:"permission",review_type:"storage_license"},"data-business":{name:"业务域",num:0,nodeName:"business",review_type:"storage_biz"},"data-manager":{name:"域管理员",num:0,nodeName:"manager",review_type:"storage_manage"}},active:"data-node"}},watch:{$route:function(t){this.initTab()}},mounted:function(){this.init()},methods:{init:function(){var t=this;h["e"]({menu:"storage",address:sessionStorage.getItem("fbs_address")}).then((function(e){e.rows&&e.rows.forEach((function(e){for(var n in t.tabs)t.tabs[n].review_type===e.review_type&&(t.tabs[n].num=e.num,console.log(n))}))})),this.initTab()},initTab:function(){var t=this.$route.query,e=t.tab;this.tabs[e]?this.active=e:this.active="data-node"},changeTab:function(t){this.active=t}}},Q=H,G=(n("2b42"),Object(u["a"])(Q,s,a,!1,null,"7ad2d1c2",null));e["default"]=G.exports},"02c3":function(t,e,n){},1542:function(t,e,n){"use strict";var s=n("cfcc"),a=n.n(s);a.a},"1a70":function(t,e,n){},"22bd":function(t,e,n){"use strict";var s=n("02c3"),a=n.n(s);a.a},"2b42":function(t,e,n){"use strict";var s=n("415c"),a=n.n(s);a.a},"415c":function(t,e,n){},"7e63":function(t,e,n){"use strict";var s=n("1a70"),a=n.n(s);a.a},"8db7":function(t,e,n){"use strict";var s=n("ad29"),a=n.n(s);a.a},"9aa7":function(t,e,n){"use strict";n.d(e,"g",(function(){return a})),n.d(e,"f",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return d}));var s=n("db04"),a=function(t,e){return s["a"].post("cmw/pbqss.do",t,e)},r=function(t,e){return s["a"].post("cmw/pbqsb.do",t,e)},i=function(t,e){return s["a"].post("cmw/pbqml.do",t,e)},o=function(t,e){return s["a"].post("cmw/pbqrm.do",t,e)},c=function(t,e){return s["a"].post("cmw/pbqan.do",t,e)},u=function(t,e){return s["a"].post("cmw/pbqrc.do",t,e)},d=function(t,e){return s["a"].post("cmw/pbqci.do",t,e)}},ad29:function(t,e,n){},cfcc:function(t,e,n){},fb6a:function(t,e,n){"use strict";var s=n("23e7"),a=n("861d"),r=n("e8b5"),i=n("23cb"),o=n("50c4"),c=n("fc6a"),u=n("8418"),d=n("b622"),l=n("1dde"),g=n("ae40"),f=l("slice"),m=g("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),p=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!f||!m},{slice:function(t,e){var n,s,d,l=c(this),g=o(l.length),f=i(t,g),m=i(void 0===e?g:e,g);if(r(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?a(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(l,f,m);for(s=new(void 0===n?Array:n)(v(m-f,0)),d=0;f<m;f++,d++)f in l&&u(s,d,l[f]);return s.length=d,s}})}}]);
//# sourceMappingURL=chunk-2c96c186.78ad6a38.js.map