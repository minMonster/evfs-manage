(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4024145f"],{"3d9d":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"alliance"},[n("div",[n("div",{staticClass:"bg-white padding",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticStyle:{"margin-bottom":"15px",color:"#273D52","font-weight":"600"}},[n("input",{attrs:{type:"hidden",id:"signResult"}}),n("span",[t._v("联盟委员决议审批规则：")]),n("Tooltip",{attrs:{placement:"top","max-width":"600",transfer:"",content:"选项说明:所有需要联盟委员审批的事务，通过决议的签批规则。* “任意一个联盟委员签批”：联盟委员会成员列表中的任何一个成员签批同意，相应的决议即可通过。* “1/3联盟委员同时签批”：只有联盟委员会成员列表中的任意1/3个成员签批同意，相应的决议方可通过。* “2/3联盟委员同时签批”：只有联盟委员会成员列表中的任意2/3个成员签批同意，相应的决议方可通过。* “所有联盟委员同时签批”： 只有联盟委员会成员列表中的所有成员签批同意，相应的决议方可通过。"}},[n("Icon",{attrs:{type:"ios-help-circle-outline"}})],1),n("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.modify}},[t._v("修改")])],1),n("RadioGroup",{staticClass:"approval",attrs:{loading:t.listLoading},on:{"on-change":t.accrptFun},model:{value:t.rule,callback:function(e){t.rule=e},expression:"rule"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"0"}},[t._v("任意一个联盟委员签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"100"}},[t._v("1/3联盟委员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"200"}},[t._v("2/3联盟委员同时签批")])],1),n("Col",{attrs:{span:"6"}},[n("Radio",{attrs:{label:"300"}},[t._v("所有联盟委员同时签批")])],1)],1)],1)],1),n("div",{staticClass:"bg-white padding"},[n("div",{staticClass:"league-mem"},[n("span",[t._v("联盟委员会成员")]),n("Button",{staticClass:"fr",attrs:{type:"primary"},on:{click:function(e){t.addModal=!0}}},[t._v("添加")])],1),n("div",[n("Row",[n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"condition-item"},[n("span",{staticClass:"condition-label"},[t._v("委员身份标识：")]),n("Input",{attrs:{type:"text",placeholder:"委员身份标识"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)]),n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"condition-item"},[n("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")])],1)])],1)],1),n("Table",{attrs:{columns:t.columns,loading:t.listLoading,data:t.list}}),n("div",{staticClass:"page",staticStyle:{position:"relative"}},[n("div",{staticClass:"page-inner"},[n("Page",{attrs:{"show-sizer":"",total:t.page.total,current:t.page.current},on:{"on-change":t.pageChange,"on-page-size-change":t.sizeChange}})],1)])],1),n("Modal",{attrs:{title:"添加联盟委员会成员"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[n("div",{staticClass:"add-modal-body"},[n("div",[n("Input",{attrs:{placeholder:"请输入委员名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("div",[n("Input",{attrs:{placeholder:"请输入委员身份标志地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{staticClass:"clearBtn",attrs:{loading:t.addLoading,type:"primary"},on:{click:t.ok}},[t._v("添加")]),n("Button",{staticClass:"clearBtn",staticStyle:{width:"80px"},on:{click:t.cancel}},[t._v("取消")])],1)])],1)])},a=[],s=(n("fb6a"),n("b0c0"),n("498a"),n("96cf"),n("1da1")),o=n("5138"),i=n("f96b"),c={data:function(){var t=this,e=[{title:"委员名称",key:"member_name"},{title:"委员身份标志地址",key:"member_address"},{title:"添加时间",key:"join_time"},{title:"操作",width:100,render:function(e,n){return e("a",{on:{click:function(){t.del(n.row)}}},"删除")}}];return{rule:null,name:"",listLoading:!1,address:"",addModal:!1,columns:e,oldList:[],list:[],addLoading:!1,page:{total:0,current:1,size:10},form:{name:"",address:"",status:""}}},mounted:function(){this.init()},watch:{},computed:{},methods:{getList:function(){this.list=this.oldList.slice((this.page.current-1)*this.page.size,this.page.size*this.page.current)},init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.listLoading=!0,e.next=3,o["c"]({rule:"chaincommittee"}).then((function(t){return t.dataId})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}));case 3:n=e.sent,o["d"]({groupId:"1",address:sessionStorage.getItem("fbs_address"),dataId:"1"|n}).then((function(e){t.listLoading=!1,t.oldList=e.rows,t.page.total=t.oldList.length,t.getList(),t.rule=e.rule})).catch((function(e){t.listLoading=!1,t.$Message.error(e.retMsg)}));case 5:case"end":return e.stop()}}),e)})))()},ok:function(){var t=this.address.trim();t?this.add():this.$Message.error("请输入管理员身份标识密钥")},add:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={from:sessionStorage.getItem("fbs_address"),member:t.address.trim(),op:1,opType:1},e.next=3,i["a"]({method:"CommitteeRuleApplyContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 3:r=e.sent,r&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:r,setIntervalFunc:function(){return i["b"]({txId:r.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 3===e.status&&(t.$Message.success("修改成功"),t.addModal=!1,!0)})).catch((function(){return!1}))}));case 5:case"end":return e.stop()}}),e)})))()},cancel:function(){this.name="",this.address="",this.addModal=!1,this.addLoading=!1},del:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r={from:sessionStorage.getItem("fbs_address"),member:t.member_address,op:2,opType:1},n.next=3,i["a"]({method:"CommitteeMemberApplyContractTxReq",jsBody:JSON.stringify(r)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(t){return e.$Message.error(t.retMsg),!1}));case 3:a=n.sent,a&&e.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:a,setIntervalFunc:function(){return i["b"]({txId:a.txId})},func:"send_trans"},(function(t){return t.then((function(t){return 3===t.status&&(e.$Message.success("修改成功"),!0)})).catch((function(){return!1}))}));case 5:case"end":return n.stop()}}),n)})))()},modify:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("modify"),t.rule){e.next=4;break}return t.$Message.warning("请选择联盟委员决议审批规则"),e.abrupt("return");case 4:return n={from:sessionStorage.getItem("fbs_address"),rule:t.rule},e.next=7,i["a"]({method:"CommitteeRuleApplyContractTxReq",jsBody:JSON.stringify(n)}).then((function(t){return{hexTxBody:t.hexTxBody,txId:t.txId}})).catch((function(e){return t.$Message.error(e.retMsg),!1}));case 7:r=e.sent,r&&t.$qrCodeAuthDialog.show({url:"bs/pbdtx.do",data:r,setIntervalFunc:function(){return i["b"]({txId:r.txId})},func:"send_trans"},(function(e){return e.then((function(e){return 3===e.status&&(t.$Message.success("修改成功"),!0)})).catch((function(){return!1}))}));case 9:case"end":return e.stop()}}),e)})))()},accrptFun:function(){},search:function(){},sizeChange:function(t){this.page.current=1,this.page.size=t,this.getList()},pageChange:function(t){this.page.current=t,this.getList()}}},u=c,d=(n("d853"),n("2877")),l=Object(d["a"])(u,r,a,!1,null,"eb2f6eca",null);e["default"]=l.exports},"498a":function(t,e,n){"use strict";var r=n("23e7"),a=n("58a8").trim,s=n("c8d2");r({target:"String",proto:!0,forced:s("trim")},{trim:function(){return a(this)}})},5138:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return i}));var r=n("db04"),a=function(t,e){return r["a"].post("cmw/pbqct.do",t,e)},s=function(t,e){return r["a"].post("cmw/pbqgi.do",t,e)},o=function(t,e){return r["a"].post("cmw/pbqml.do",t,e)},i=function(t,e){return r["a"].post("cmw/pbqan.do",t,e)}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),a=n("5899"),s="["+a+"]",o=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),c=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(o,"")),2&t&&(n=n.replace(i,"")),n}};t.exports={start:c(1),end:c(2),trim:c(3)}},c8d2:function(t,e,n){var r=n("d039"),a=n("5899"),s="​᠎";t.exports=function(t){return r((function(){return!!a[t]()||s[t]()!=s||a[t].name!==t}))}},d853:function(t,e,n){"use strict";var r=n("dfe3"),a=n.n(r);a.a},dfe3:function(t,e,n){},f96b:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o}));var r=n("db04"),a=function(t,e){return r["a"].post("cmw/pbrus.do",t,e)},s=function(t,e){return r["a"].post("bs/pbgen.do",t,e)},o=function(t,e){return r["a"].post("bs/pbgts.do",t,e)}},fb6a:function(t,e,n){"use strict";var r=n("23e7"),a=n("861d"),s=n("e8b5"),o=n("23cb"),i=n("50c4"),c=n("fc6a"),u=n("8418"),d=n("b622"),l=n("1dde"),f=n("ae40"),p=l("slice"),g=f("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),m=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!p||!g},{slice:function(t,e){var n,r,d,l=c(this),f=i(l.length),p=o(t,f),g=o(void 0===e?f:e,f);if(s(l)&&(n=l.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?a(n)&&(n=n[h],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return m.call(l,p,g);for(r=new(void 0===n?Array:n)(v(g-p,0)),d=0;p<g;p++,d++)p in l&&u(r,d,l[p]);return r.length=d,r}})}}]);
//# sourceMappingURL=chunk-4024145f.7ffebcf2.js.map